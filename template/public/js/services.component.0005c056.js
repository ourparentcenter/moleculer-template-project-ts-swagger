(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{4890:function(e,t,n){"use strict";n.r(t);var c=n("7a23");const a=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",{class:"text-left"},"Action Name"),Object(c["i"])("th",{class:"text-center"},"Rest"),Object(c["i"])("th",{class:"text-center"},"Paramaters"),Object(c["i"])("th",{class:"text-right"})])],-1),o=Object(c["h"])("cached"),r=Object(c["i"])("td",null,null,-1);function i(e,t){const n=Object(c["F"])("q-th"),i=Object(c["F"])("q-tr"),l=Object(c["F"])("q-btn"),s=Object(c["F"])("q-td"),b=Object(c["F"])("q-badge"),O=Object(c["F"])("q-chip"),j=Object(c["F"])("q-markup-table"),d=Object(c["F"])("q-table");return Object(c["y"])(),Object(c["f"])(d,{title:"Service Status",rows:e.filteredServices,columns:e.columns,"row-key":"name"},{header:Object(c["L"])((e=>[Object(c["i"])(i,{props:e},{default:Object(c["L"])((()=>[Object(c["i"])(n,{"auto-width":""}),(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(e.cols,(t=>(Object(c["y"])(),Object(c["f"])(n,{key:t.name,props:e},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:Object(c["L"])((t=>[Object(c["i"])(i,{props:t},{default:Object(c["L"])((()=>[Object(c["i"])(s,{"auto-width":""},{default:Object(c["L"])((()=>[Object(c["i"])(l,{size:"sm",color:"accent",round:"",dense:"",onClick:e=>t.expand=!t.expand,icon:t.expand?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),Object(c["i"])(s,{key:"name",props:t},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])(t.row.name)+" ",1),t.row.version?(Object(c["y"])(),Object(c["f"])(b,{key:0,transparent:"",color:"black"},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])("v"+t.row.version),1)])),_:2},1024)):Object(c["g"])("",!0)])),_:2},1032,["props"]),Object(c["i"])(s,{key:"nodes",props:t},{default:Object(c["L"])((()=>[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(t.row.nodes,(e=>(Object(c["y"])(),Object(c["f"])(O,{key:e,class:"glossy",square:"",color:"grey","text-color":"white"},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])(e),1)])),_:2},1024)))),128))])),_:2},1032,["props"]),Object(c["i"])(s,{key:"status",props:t},{default:Object(c["L"])((()=>[Object(c["i"])(O,{class:"glossy",square:"",color:t.row.nodes.length>0?"teal":"red","text-color":"white",icon:t.row.nodes.length>0?"done":"priority_high"},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])(t.row.nodes.length>0?"Online":"Offline"),1)])),_:2},1032,["color","icon"])])),_:2},1032,["props"])])),_:2},1032,["props"]),Object(c["M"])(Object(c["i"])(i,{props:t},{default:Object(c["L"])((()=>[Object(c["i"])(s,{colspan:"100%"},{default:Object(c["L"])((()=>[Object(c["i"])(j,null,{default:Object(c["L"])((()=>[a,Object(c["i"])("tbody",null,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(e.getServiceActions(t.row),(n=>(Object(c["y"])(),Object(c["f"])("tr",{class:{action:!0,offline:!n.available,local:n.hasLocal},key:n.name},[Object(c["i"])("td",null,[Object(c["h"])(Object(c["H"])(n.name)+" ",1),n.action.cache?(Object(c["y"])(),Object(c["f"])(b,{key:0,transparent:"",color:"orange","text-color":"black"},{default:Object(c["L"])((()=>[o])),_:1})):Object(c["g"])("",!0)]),Object(c["i"])("td",{innerHTML:e.getActionREST(t.row,n)},null,8,["innerHTML"]),Object(c["i"])("td",{title:e.getActionParams(n,40)},Object(c["H"])(e.getActionParams(n,40)),9,["title"]),r,Object(c["i"])("td",null,[Object(c["i"])(O,{class:"glossy",square:"",color:n.available?"teal":"red","text-color":"white",icon:n.available?"done":"priority_high"},{default:Object(c["L"])((()=>[Object(c["h"])(Object(c["H"])(n.available?"Online":"Offline"),1)])),_:2},1032,["color","icon"])])],2)))),128))])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"]),[[c["J"],t.expand]])])),_:1},8,["rows","columns"])}var l=n("6c02"),s=n("a748"),b=n("b3fe"),O=function(e,t,n,c){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function r(e){try{l(c.next(e))}catch(t){o(t)}}function i(e){try{l(c["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(r,i)}l((c=c.apply(e,t||[])).next())}))};let j;const d=[{name:"name",required:!0,label:"Service name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"nodes",align:"center",label:"Instances",field:"nodes",sortable:!0},{name:"status",align:"center",label:"Status",field:"nodes",sortable:!0}];var u=Object(c["j"])({name:"CompositionComponent",setup(){const e=Object(b["a"])(),t=Object(c["D"])([]);let n={};function a(t){return O(this,void 0,void 0,(function*(){return yield s["api"].get(t).then((e=>e.data)).catch((()=>{e.notify({color:"negative",position:"top",message:"Loading failed",icon:"report_problem"})}))}))}const o=Object(c["d"])((()=>{const e=t.value.filter((e=>!e.name.startsWith("$")));return e}));function r(){return O(this,void 0,void 0,(function*(){yield a("/api/~node/services?withActions=true").then((e=>{t.value=e,e.sort(((e,t)=>e.name.localeCompare(t.name))),e.forEach((e=>e.nodes.sort()))})).then((()=>O(this,void 0,void 0,(function*(){return yield a("/api/~node/actions")})))).then((e=>{e.sort(((e,t)=>e.name.localeCompare(t.name)));const t=e.reduce(((e,t)=>(e[t.name]=t,e)),{});n=t}))}))}function i(e){const t=Object.keys(e.actions).map((e=>n[e])).filter((e=>!!e));return t}function u(e,t){if(e.action&&e.action.params){const n=Object.keys(e.action.params).join(", ");return n.length>t?n.substr(0,t)+"â€¦":n}return"-"}function f(e,t){if(t.action.rest){let n=e.fullName||e.name;if("string"==typeof e.settings.rest&&(n=e.settings.rest),"string"==typeof t.action.rest){if(-1!==t.action.rest.indexOf(" ")){const e=t.action.rest.split(" ");return`<div role="alert" class="q-badge flex inline items-center no-wrap q-badge--single-line bg-${"GET"==e[0]?"blue":"POST"==e[0]?"green":"PUT"==e[0]?"orange":"red"} q-badge--transparent">${e[0]}</div> ${n}${e[1]}`}return`<div role="alert" class="q-badge flex inline items-center no-wrap q-badge--single-line bg-black q-badge--transparent">*</div> ${n}${t.action.rest}`}return`<div role="alert" class="q-badge flex inline items-center no-wrap q-badge--single-line bg-black q-badge--transparent">${t.action.rest.method||"*"}</div>\t${n}${t.action.rest.path}`}return""}return Object(c["v"])((()=>{j=setInterval((()=>{r()}),2e3)})),Object(l["c"])(((e,t,n)=>{clearInterval(j),n()})),{filteredServices:o,getActionREST:f,getActionParams:u,getServiceActions:i,columns:d}}}),f=n("eaac"),p=n("bd08"),h=n("357e"),g=n("db86"),m=n("9c40"),v=n("58a8"),y=n("b047"),w=n("2bb1"),k=n("eebe"),q=n.n(k);u.render=i;t["default"]=u;q()(u,"components",{QTable:f["a"],QTr:p["a"],QTh:h["a"],QTd:g["a"],QBtn:m["a"],QBadge:v["a"],QChip:y["a"],QMarkupTable:w["a"]})}}]);